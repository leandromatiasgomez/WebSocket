<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>WebSocket</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	</head>
	<body>
		<div id="divMsgs"></div>
		<input type="text" id="inpUser">
		<input type="text" id="inpMsgs">
		<button onclick="sendMessage()">Send</button>	
		
		<script th:inline="javascript">
			let socket = new WebSocket("ws://localhost:8080/chat");
			
			socket.onmessage = function(event){
				let divMsgs = document.getElementById("divMsgs");
				divMsgs.innerHTML += '<p>' + event.data + '</p>';
			}
			
			function sendMessage(){
				let username = document.getElementById("inpUser");
				let messageInput = document.getElementById("inpMsgs");
				
				let fullMessage = username.value + ": " + messageInput.value;
				socket.send(fullMessage);
				messageInput.value = '';
			}
		</script>
	</body>
</html>